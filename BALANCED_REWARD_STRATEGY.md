# ุชุญูู ูุดฺฉู Always-ON ู ุฑุงูโุญู ููุง

## ๐ ุชุญูู ูุดฺฉูุงุช ูุจู

### ูุณุฎู ุงูู (ฺฉุฏ ุงุตู ุดูุง)
```
ูุชุฌู: Always OFF
- ูุฒูู ุฑุง ุฎู ุณูฺฏู ุฌุฑูู ูโฺฉุฑุฏ
- Agent ุงุฏ ฺฏุฑูุช: "ุฎุงููุด ุจูุงู ุชุง ูุฒูู ฺฉู ุดูุฏ"
- Comfort loss ูุงุฌุนูโุจุงุฑ ุจูุฏ
```

### ูุณุฎู ุฏูู (ุงููู ุชูุงุด ูู)
```
ูุชุฌู: Always ON
- Comfort ุฑุง ุฎู ุณูฺฏู ูพุงุฏุงุด ูโุฏุงุฏ
- Agent ุงุฏ ฺฏุฑูุช: "ุฑูุดู ุจูุงู ุชุง ูุฑฺฏุฒ ุงุฒ comfort ุฎุงุฑุฌ ูุดู"
- 0 cyclesุ ูุฒูู ุจุงูุงุ comfort ูู ุจุฏ!
```

## ๐ฏ ุฑุงูโุญู: Reward Function ุงููุงูโฺฏุฑูุชู ุงุฒ Thermostat

### ููููู ฺฉูุฏ: Deadband-Aware Reward

ฺฉ ุชุฑููุณุชุงุช ูุงูุน ฺุทูุฑ ฺฉุงุฑ ูโฺฉูุฏุ

```
Setpoint = 21ยฐC
Deadband = 1.5ยฐC
โ Lower = 19.5ยฐC
โ Upper = 22.5ยฐC

ุงฺฏุฑ T < 19.5ยฐC  โ ุจุงุฏ ON ุดูุฏ
ุงฺฏุฑ T > 22.5ยฐC  โ ุจุงุฏ OFF ุดูุฏ
ุงฺฏุฑ 19.5 โค T โค 22.5  โ ูุฑ ุฏู ุญุงูุช OK ุงุณุช!
```

**ฺฉูุฏ ููููุช:** Agent ุจุงุฏ ุงุฏ ุจฺฏุฑุฏ ุฏุฑ ุฏุงุฎู deadband ูโุชูุงูุฏ OFF ุจุงุดุฏ!

## ๐ง ุทุฑุงุญ Reward Function ุฌุฏุฏ

### ุณุงุฎุชุงุฑ ุณูุณููโูุฑุงุชุจ

```python
# Level 1: ุขุง ุฏุฑ comfort band ูุณุชูุ
if T < comfort_min or T > comfort_max:
    penalty = w_comfort_violation * (deviationยฒ)  # โ๏ธ ุงูุฑฺุงูุณ!
    
# Level 2: ุขุง ุฏุฑ deadband ูุณุชูุ
elif T < lower_deadband or T > upper_deadband:
    penalty = w_temp_deviation * (deviationยฒ)  # โก ุจุฑฺฏุฑุฏ ุจู deadband
    
# Level 3: ุฏุฑ deadband ูุณุชู - OK!
else:
    # ุงฺฏุฑ ON ูุณุชู ู ุฏูุง >= setpoint โ ุบุฑุถุฑูุฑ!
    if action == ON and T >= setpoint:
        penalty = w_unnecessary_on  # ๐ก ูโุชูู OFF ุด
```

### ูุฒูโูุง ูุชุนุงุฏู

```python
w_comfort_violation = 50.0   # ุดุฏุฏ ุงูุง ูู ุงูุฑุงุท
w_temp_deviation = 2.0       # ูุชูุณุท
w_unnecessary_on = 5.0       # ุชุดูู ุจู OFF ุดุฏู ุฏุฑ deadband
w_cost = 1.0                 # ููุดู ูุนุงู
w_peak = 2.0                 # peak shaving (ููุท ุฏุฑ deadband)
w_switch = 0.1               # ฺฉูโุงููุช
```

## ๐ ูุซุงู ุนุฏุฏ

### ุณูุงุฑู 1: T_in = 20.5ยฐC (ุฏุฑ deadband)

```python
# Agent ูโุชูุงูุฏ OFF ุจุงุดุฏ:
if action == OFF:
    comfort_penalty = 0  # ุฏุฑ deadband
    unnecessary_on = 0   # OFF ุงุณุช
    cost = 0            # ูุตุฑู ุตูุฑ
    โ Total reward โ +1.0 โ

# ุงูุง ุงฺฏุฑ ON ุจุงุดุฏ:
if action == ON:
    comfort_penalty = 0
    unnecessary_on = 5.0  # ุบุฑุถุฑูุฑ! (T >= setpoint)
    cost = 1.0 * 0.0005 = 0.0005
    โ Total reward โ +1.0 - 5.0 - 0.0005 โ -4.0 โ
    
โ Agent ุงุฏ ูโฺฏุฑุฏ: "ุฏุฑ deadband ุจุง ุฏูุง ุจุงูุงุ OFF ุดู!"
```

### ุณูุงุฑู 2: T_in = 19.0ยฐC (ุฒุฑ deadband)

```python
# Agent ุจุงุฏ ON ุดูุฏ:
if action == OFF:
    deviation = 19.5 - 19.0 = 0.5
    comfort_penalty = 2.0 * (0.5ยฒ) = 0.5
    โ Total reward โ +1.0 - 0.5 = +0.5 โ๏ธ

if action == ON:
    # ุฏูุง ุจู ุชุฏุฑุฌ ุจุงูุง ูโุฑูุฏุ penalty ฺฉุงูุด ูโุงุจุฏ
    comfort_penalty โ 0
    cost = 0.0005
    โ Total reward โ +1.0 - 0.0005 โ +0.995 โ
    
โ Agent ุงุฏ ูโฺฏุฑุฏ: "ุงฺฏุฑ ุณุฑุฏ ุงุณุชุ ON ุดู!"
```

### ุณูุงุฑู 3: T_in = 18.0ยฐC (ุฎุงุฑุฌ comfort band)

```python
if action == OFF:
    violation = 19.5 - 18.0 = 1.5
    comfort_penalty = 50.0 * (1.5ยฒ) = 112.5
    โ Total reward โ 0.0 - 112.5 = -112.5 ๐๐๐

if action == ON:
    comfort_penalty ฺฉุงูุด ูโุงุจุฏ...
    โ Total reward ุจูุชุฑ ูโุดูุฏ โ
    
โ Agent ุงุฏ ูโฺฏุฑุฏ: "ุฎุงุฑุฌ comfort = ุงูุฑฺุงูุณ! ููุฑุงู ON ุดู!"
```

## ๐ฎ ูฺฉุงูุฒู Peak Shaving

```python
# ููุท ููุช ุฑุงุญุช ูุณุชูุ peak ุฑุง ุฏุฑ ูุธุฑ ุจฺฏุฑู
if is_peak_hour and action == ON:
    if in_deadband:  # ุฑุงุญุชู
        peak_penalty = w_peak * energy_kwh  # ูโุชููู OFF ุดู
    else:  # ูุงุฑุงุญุชู
        peak_penalty = 0  # comfort ูููโุชุฑ ุงุณุช!
```

ุงู ุจุงุนุซ ูโุดูุฏ Agent ุงุฏ ุจฺฏุฑุฏ:
- **ุฏุฑ peak hours:** ุงฺฏุฑ ุฏุฑ deadband ูุณุชุ ุชุฑุฌุญุงู OFF ุดู
- **ุฏุฑ off-peak hours:** ุฑุงุญุชโุชุฑ ON ุดู

## ๐ ฺุฑุง ุงู ุจุงุฑ ูููู ูโุดูุฏุ

### ููุงุณู ุณู ุฑูฺฉุฑุฏ:

| ุฌูุจู | ูุณุฎู 1 (Always OFF) | ูุณุฎู 2 (Always ON) | ูุณุฎู 3 (Balanced) |
|------|---------------------|-------------------|-------------------|
| **Comfort penalty** | ฺฉูฺฺฉ | ุฎู ุจุฒุฑฺฏ | ูุชุนุงุฏู (50.0) |
| **Cost weight** | ุฎู ุจุฒุฑฺฏ | ุตูุฑ | ูุชูุณุท (1.0) |
| **Deadband logic** | โ | โ | โ |
| **Unnecessary ON penalty** | โ | โ | โ (5.0) |
| **Peak awareness** | ุจุฏ | ูุงุฏุฏู | ููุดููุฏ |

### ูฺฉุงุช ฺฉูุฏ ูุณุฎู 3:

1. **Baseline reward = 1.0** ุงฺฏุฑ ุฏุฑ comfort band
   - ุญุช ุจุฏูู ูฺ ฺฉุงุฑุ +1 ูโฺฏุฑ
   - ุงู ุจู agent ูโฺฏูุฏ "comfort = ุฎูุจ"

2. **Unnecessary ON penalty**
   - ุงฺฏุฑ ุฏูุง >= setpoint ู ON ูุณุช โ -5
   - ุงู ุจู agent ูโฺฏูุฏ "ุฏุฑ deadband ุจุงูุงุ OFF ุดู"

3. **Hierarchical comfort penalties**
   - ุฏุฑ deadband: penalty = 0
   - ุฎุงุฑุฌ deadband: penalty = 2.0 ร (devยฒ)
   - ุฎุงุฑุฌ comfort: penalty = 50.0 ร (violationยฒ)
   
4. **Cost ููุดู ูุนุงู**
   - w_cost = 1.0 (ูู ุตูุฑุ ูู ุฎู ุจุฒุฑฺฏ)
   - ูุฑ joule ูุตุฑู ุฌุฑูู ุฏุงุฑุฏ
   - ุงูุง comfort ูููุฒ ุงูููุช ุงุณุช

## ๐ ูุชุงุฌ ููุฑุฏ ุงูุชุธุงุฑ

### ุงฺฏุฑ ููู ฺุฒ ุฏุฑุณุช ูพุด ุจุฑูุฏ:

```
โ Cost: -10% ุชุง -20% (ุจูุจูุฏ ูุณุจุช ุจู baseline)
โ Comfort: -20% ุชุง -40% (ฺฉุงูุด discomfort)
โ Energy: -5% ุชุง -15% (ฺฉุงูุด ูุตุฑู)
โ Peak power: -15% ุชุง -30% (ฺฉุงูุด ุฏุฑ peak hours)
โ Cycles: 50-200 (ูุนูููุ ูู ุตูุฑ ู ูู ุฒุงุฏ)
```

### ุนูุงุฆู ููููุช:

- **Temperature oscillation** ูุซู thermostat (19.5โ22.5ยฐC)
- **Cycling pattern** ูุงุถุญ (ON/OFF/ON/OFF...)
- **Peak shaving** ูุงุจู ูุดุงูุฏู (ฺฉูุชุฑ ON ุฏุฑ 16-21)
- **ููู metrics ุจูุชุฑ** ุงุฒ baseline

## ๐จ ุงฺฏุฑ ูููุฒ ูุดฺฉู ุฏุงุดุช...

### ุนูุงูุช 1: ูููุฒ Always ON ุงุณุช

```python
# ุฑุงูโุญู: ุงูุฒุงุด penalty ุจุฑุง unnecessary ON
w_unnecessary_on = 10.0  # ูุจูุงู 5.0 ุจูุฏ

# ุง: ฺฉุงูุด comfort penalty
w_comfort_violation = 30.0  # ูุจูุงู 50.0 ุจูุฏ
```

### ุนูุงูุช 2: ูููุฒ Always OFF ุงุณุช

```python
# ุฑุงูโุญู: ุงูุฒุงุด comfort penalty
w_comfort_violation = 100.0  # ูุจูุงู 50.0 ุจูุฏ

# ุง: ฺฉุงูุด cost weight
w_cost = 0.5  # ูุจูุงู 1.0 ุจูุฏ
```

### ุนูุงูุช 3: Cycling ุฎู ุฒุงุฏ (ูุซูุงู 500+ cycles)

```python
# ุฑุงูโุญู: ุงูุฒุงุด switching penalty
w_switch = 1.0  # ูุจูุงู 0.1 ุจูุฏ
```

### ุนูุงูุช 4: Peak shaving ฺฉุงุฑ ููโฺฉูุฏ

```python
# ุฑุงูโุญู: ุงูุฒุงุด peak penalty
w_peak = 5.0  # ูุจูุงู 2.0 ุจูุฏ
```

## ๐ก ูฺฉุงุช ูพุงุฏูโุณุงุฒ

### 1. Episode Length ุทููุงูโุชุฑ

```python
episode_length_days = 2  # ูุจูุงู 1 ุจูุฏ
```

**ฺุฑุงุ** Agent ุจุงุฏ ฺูุฏ ุณฺฉู ฺฉุงูู ON/OFF ุฑุง ุชุฌุฑุจู ฺฉูุฏ ุชุง ุงุฏ ุจฺฏุฑุฏ.

### 2. Training Steps ุจุดุชุฑ

```python
total_timesteps = 200_000  # ูุจูุงู 150_000 ุจูุฏ
```

**ฺุฑุงุ** ุงุฏฺฏุฑ ุฑูุชุงุฑ oscillatory ุฒูุงู ูโุจุฑุฏ.

### 3. Exploration ุจุดุชุฑ

```python
ent_coef = 0.02  # ูุจูุงู 0.01 ุจูุฏ
```

**ฺุฑุงุ** Agent ุจุงุฏ OFF ุดุฏู ุฑุง ุงูุชุญุงู ฺฉูุฏ (ุญุช ุงฺฏุฑ ุงูู ุชุฑุณูุงฺฉ ุจู ูุธุฑ ุจุฑุณุฏ).

## ๐ ุฏุฑุณโูุง ุขููุฎุชู ุดุฏู

1. **"Comfort-first" ุจู ูุนูุง "Always ON" ูุณุช**
   - ุจุงุฏ ุงุฏ ุจฺฏุฑู ฺฉู OFF ุดุฏู ุฏุฑ deadband ุงูู ุงุณุช

2. **Reward shaping > Weight tuning**
   - ุณุงุฎุชุงุฑ reward ูููโุชุฑ ุงุฒ ููุฏุงุฑ weights ุงุณุช
   - Logic ุฏุฑุณุช > Numbers ุจุฒุฑฺฏ

3. **Learning from baselines**
   - ุชุฑููุณุชุงุชโูุง ุณุงุฏู ุฑูุชุงุฑ ุฎูุจ ุฏุงุฑูุฏ
   - RL ุจุงุฏ ุขู ุฑุง ุงุฏ ุจฺฏุฑุฏ ู ุจูุจูุฏ ุฏูุฏุ ูู ูุงุฏุฏู ุจฺฏุฑุฏ

4. **Testing early**
   - ฺูุฏ episode test ุจุฒูุฏ ูุจู ุงุฒ training ฺฉุงูู
   - ุงฺฏุฑ ููุงู ุงูู Always ON/OFF ุฑูุชุ weights ุฑุง ุชุบุฑ ุฏูุฏ

## ๐ ฺฺฉโูุณุช ูุจู ุงุฒ Run

- [ ] `data_dir` ุฑุง ุฏุฑุณุช ุชูุธู ฺฉุฑุฏูโุงุฏ
- [ ] Baseline ุฑุง ุงูู test ฺฉุฑุฏูโุงุฏ (ุจุฑุง ููุงุณู)
- [ ] Episode length >= 2 days ุงุณุช
- [ ] Total timesteps >= 200k ุงุณุช
- [ ] Log files ุฑุง ฺฺฉ ูโฺฉูุฏ (ุจุจูุฏ cycling ุฏุงุฑุฏ ุง ูู)

ูููู ุจุงุดุฏ! ๐
